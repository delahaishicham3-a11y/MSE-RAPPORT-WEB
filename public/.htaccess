# ----------------------------------------
# üîß Configuration Apache pour application PHP
# ----------------------------------------

# Utiliser le moteur de r√©√©criture d'URL
<IfModule mod_rewrite.c>
    RewriteEngine On

    # Si le fichier ou dossier demand√© existe, ne pas r√©√©crire
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d

    # Rediriger tout vers index.php (pour routage ou API)
    RewriteRule ^ index.php [QSA,L]
</IfModule>

# ----------------------------------------
# S√©curit√© et bonnes pratiques
# ----------------------------------------

# Interdire l‚Äôacc√®s aux fichiers sensibles
<FilesMatch "(\.env|composer\.json|composer\.lock|Dockerfile|config\.php)">
    Require all denied
</FilesMatch>

# Emp√™cher l‚Äôaffichage des erreurs PHP en prod
php_flag display_errors off

# Forcer l‚Äôencodage UTF-8
AddDefaultCharset UTF-8

# D√©finir le fuseau horaire par d√©faut (optionnel)
php_value date.timezone "Europe/Paris"

# Activer la compression (si module disponible)
<IfModule mod_deflate.c>
    AddOutputFilterByType DEFLATE text/html text/plain text/xml text/css text/javascript application/javascript
</IfModule>

# Expiration cache statique (am√©liore la vitesse)
<IfModule mod_expires.c>
    ExpiresActive On
    ExpiresByType image/jpg "access plus 30 days"
    ExpiresByType image/jpeg "access plus 30 days"
    ExpiresByType image/gif "access plus 30 days"
    ExpiresByType image/png "access plus 30 days"
    ExpiresByType text/css "access plus 7 days"
    ExpiresByType application/javascript "access plus 7 days"
    ExpiresByType text/javascript "access plus 7 days"
    ExpiresDefault "access plus 2 days"
</IfModule>
